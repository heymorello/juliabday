<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –î–∂—É–ª—Å!</title>
<link href="https://fonts.googleapis.com/css2?family=Pangolin&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  padding: 0;
  height: 100vh;
  overflow: hidden;
  background-image: url('https://i.ibb.co/HprLk5vN/upscalemedia-transformed-2.png');
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  font-family: 'Pangolin', cursive;
  user-select: none;
}
.container {
  position: relative;
  width: 100%;
  height: 100%;
}
.item {
  position: absolute;
  transition: transform 0.3s ease, filter 0.3s ease;
  filter: brightness(0.9);
  cursor: pointer;
  user-select: none;
}
.item:hover {
  transform: scale(1.05);
  filter: brightness(1.15) drop-shadow(0 0 10px rgba(255,255,200,0.6));
}
#basket { left: 8%; top: 25%; width: 26%; z-index: 10; filter: drop-shadow(0px 10px 1px rgba(0,0,0,0.2)); }
#pot { left: 33%; top: 20%; width: 36%; z-index: 1; filter: drop-shadow(0px 12px 1px rgba(0,0,0,0.2)); }
#wand { left: 58%; top: 64%; width: 24%; transform: rotate(-20deg); z-index: 5; filter: drop-shadow(0px 8px 3px rgba(0,0,0,0.25)); }
#wand:hover { transform: rotate(-20deg) scale(1.05); }

.berry { position: absolute; width: 10%; cursor: grab; user-select: none; z-index: 20; pointer-events: auto; }

.poof {
  position: absolute;
  pointer-events: none;
  z-index: 25;
  opacity: 0;
  transition: opacity 0.6s ease;
  max-width: 150px;
  width: auto;
  height: auto;
}

#steam-text {
  position: absolute;
  top: 25%;
  left: 75%;
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
  width: 24%;
  padding: 18px 22px;
  background-color: rgba(255,255,255,0.95);
  border-radius: 20px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  font-family: 'Pangolin', cursive;
  font-size: 16px;
  line-height: 1.4;
  pointer-events: none;
  z-index: 30;
  text-align: justify;
  transition: transform 0.5s ease, opacity 0.5s ease;
}

#small-tip {
  position: absolute;
  color: white;
  font-size: 14px;
  font-family: 'Pangolin', cursive;
  pointer-events: none;
  z-index: 50;
  opacity: 0;
  transition: opacity 0.3s ease;
}
</style>
</head>

<body>
<div class="container">
  <img id="basket" class="item" src="https://i.ibb.co/hxdH1ChV/Chat-GPT-Image-17-2025-19-07-18.png" alt="–ö–æ—Ä–∑–∏–Ω–∫–∞" />
  <img id="pot" class="item" src="https://i.ibb.co/6JyrTSmY/rfcnh-kz1.gif" alt="–ö–∞—Å—Ç—Ä—é–ª—è" />
  <img id="wand" class="item" src="https://i.ibb.co/BVRr2VR2/Chat-GPT-Image-19-2025-08-36-05.png" alt="–í–æ–ª—à–µ–±–Ω–∞—è –ø–∞–ª–æ—á–∫–∞" />

  <div id="steam-text">
    <h2 style="color:#7b3131; margin:0 0 8px 0; font-size:22px;">
      –Ø–≥–æ–¥–∫–∞, –º—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–µ–±—è –Ω–∞ –≤–æ–ª—à–µ–±–Ω–æ–π –∫—É—Ö–Ω–µ!
    </h2>
    <p>–°–µ–≥–æ–¥–Ω—è –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å, –ø–æ—ç—Ç–æ–º—É —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –µ—Å—Ç—å –æ—Å–æ–±–µ–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç. –î–∞–≤–∞–π –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–º –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –≤–∞—Ä–µ–Ω—å–µ! –°–∫–æ–ª—å–∫–æ –µ–≥–æ –Ω–µ –µ—à—å, –æ–Ω–æ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –∏ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ç–µ–±—è —Ä–∞–¥–æ–≤–∞—Ç—å.</p>
    <p>–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–π —è–≥–æ–¥—ã –≤ –∫–∞—Å—Ç—Ä—é–ª—é: üçìüëâüèªü•ò</p>
  </div>

  <div id="small-tip"></div>
</div>

<script>
const basket = document.getElementById("basket");
let pot = document.getElementById("pot");
const wand = document.getElementById("wand");
const container = document.querySelector(".container");
const steamText = document.getElementById("steam-text");
const smallTip = document.getElementById("small-tip");

const berrySrc = "https://i.ibb.co/Hfdh9TPG/Chat-GPT-Image-17-2025-19-01-18.png";
const jamJarSrc = "https://i.ibb.co/GvHNg5vc/Chat-GPT-Image-19-2025-16-38-48.png";

const messages = [
  "–î–∂—É–ª—Å, —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–µ–±–µ –º–Ω–æ–≥–æ —Å–∏–ª, —Ä–∞–¥–æ—Å—Ç–∏ –∏ –∫—Ä—É—Ç—ã—Ö —Å–æ–±—ã—Ç–∏–π. –ñ–µ–ª–∞—é —è—Ä–∫–∏—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–π, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –≤–æ –≤—Å—ë–º –∑–∞ —á—Ç–æ –±–µ—Ä—ë—à—å—Å—è –∏ –∫—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è.<br><br>–î–∏–Ω–∞",
  "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è! –ö—É—à–∞–π—Ç–µ –º–Ω–æ–≥–æ —Å–ª–∞–¥–∫–æ–≥–æ –∏ –ø–µ–π—Ç–µ –º–Ω–æ–≥–æ –≤–∫—É—Å–Ω–æ–≥–æ –≤ –í–∞—à –¥–µ–Ω—å üéÇ<br><br>–ê–¥–µ–ª–∏–Ω –≠–π–≤–µ—Ä–∏",
  "–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è!!! –í—Å–µ–≥–æ –Ω–∞–∏–ª—É—á—à–µ–≥–æ –∏ —Å–∞–º–æ–≥–æ –≤–æ–ª—à–µ–±–Ω–æ–≥–æ –≤ –∂–∏–∑–Ω–∏! :D<br><br>–ì–µ—Ä–æ–Ω –í–∞–π—Ç–º–æ—Ä",
  "–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! –≠—Ç–æ—Ç –¥–µ–Ω—å, –±–µ–∑—É—Å–ª–æ–≤–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω—ã–π, –Ω–æ —è —Ö–æ—á—É –ø–æ–∂–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –≤–Ω–∏–º–∞–Ω–∏–µ –±–ª–∏–∑–∫–∏—Ö, –ø–æ–¥–∞—Ä–∫–∏, –≤–µ—Å–µ–ª—å–µ –∏ –ª—ë–≥–∫–æ—Å—Ç—å —Ç—ã –æ—â—É—â–∞–ª–∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è, –Ω–æ –∏ –≤ –∫–∞–∂–¥—ã–π —Å–≤–æ–π –¥–µ–Ω—å ‚Äî —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö —Å—Ç–∞–ª –¥–ª—è —Ç–µ–±—è –æ—Å–æ–±–µ–Ω–Ω—ã–º.<br><br>–§–µ–ª–∏–∫—Å –ú–æ—Ä–≥–∞–Ω"
];

let currentBerry = null;
let bubbleIndex = 0;
let firstClick = true;
let lastBubble = false;
let jamPlaced = false;
let berriesDisabled = false;

let wandPicked = false;

// –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –ø–∞–ª–æ—á–∫–∏
const wandStart = {
  left: wand.style.left,
  top: wand.style.top
};

// -------------------- –ö–õ–ò–ö –ü–û –ö–û–†–ó–ò–ù–ï --------------------
basket.addEventListener("click", (e) => {
  if (firstClick) {
    hideSteamText();
    firstClick = false;
  }

  if (berriesDisabled) {
    showTip(e.clientX, e.clientY, "—è–≥–æ–¥—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üçì");
    return;
  }
  if (currentBerry) return;

  createBerry(e);
});

// -------------------- –Ø–ì–û–î–ê --------------------
function createBerry(e) {
  const berry = document.createElement("img");
  berry.src = berrySrc;
  berry.className = "berry";
  container.appendChild(berry);
  currentBerry = berry;

  moveBerry(berry, e);
  berry.style.pointerEvents = "none";

  function follow(ev) { moveBerry(berry, ev); }
  function release(ev) {
    document.removeEventListener("mousemove", follow);
    document.removeEventListener("mouseup", release);
    berry.style.pointerEvents = "auto";
    checkDrop(berry);
  }
  document.addEventListener("mousemove", follow);
  document.addEventListener("mouseup", release);
}

function moveBerry(berry, e) {
  const rect = container.getBoundingClientRect();
  const size = berry.offsetWidth || 50;
  berry.style.left = (e.clientX - rect.left - size / 2) + "px";
  berry.style.top = (e.clientY - rect.top - size / 2) + "px";
}

function checkDrop(berry) {
  const berryRect = berry.getBoundingClientRect();
  const potRect = pot.getBoundingClientRect();

  const overlap =
    berryRect.left < potRect.right &&
    berryRect.right > potRect.left &&
    berryRect.top < potRect.bottom &&
    berryRect.bottom > potRect.top;

  if (overlap) {
    const x = berryRect.left + berryRect.width / 2;
    const y = berryRect.top + berryRect.height / 2;

    triggerPoof(x, y, lastBubble ? 2 : 1);
    berry.remove();
    currentBerry = null;

    if (!lastBubble) {
      showSteamText();
      lastBubble = bubbleIndex >= messages.length;
    } else {
      showTip(potRect.left + potRect.width / 2, potRect.top, "");
    }
  } else {
    currentBerry = null;
  }
}

// -------------------- –ë–ê–ë–õ --------------------
function showSteamText() {
  steamText.innerHTML = messages[bubbleIndex];
  bubbleIndex++;
  lastBubble = bubbleIndex === messages.length;

  steamText.style.transition = "none";
  steamText.style.transform = "translate(-50%, -50%) scale(0)";
  steamText.style.opacity = "0";
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      steamText.style.transition = "transform 0.5s ease, opacity 0.5s ease";
      steamText.style.transform = "translate(-50%, -50%) scale(1)";
      steamText.style.opacity = "1";
    });
  });
}

function hideSteamText() {
  steamText.style.transform = "translate(-50%, -50%) scale(0)";
  steamText.style.opacity = "0";
  setTimeout(() => { steamText.innerHTML = ""; }, 500);
}

// -------------------- –ü–ê–õ–û–ß–ö–ê --------------------
wand.addEventListener("click", (e) => {
  if (!lastBubble || jamPlaced) return;
  pickWand(e);
});

function pickWand(e) {
  wandPicked = true;
  wand.style.pointerEvents = "none";
  wand.style.transition = "none";

  // –°–∫—Ä—ã–≤–∞–µ–º –±–∞–±–ª —Å—Ä–∞–∑—É, –∫–∞–∫ –±–µ—Ä—ë–º –ø–∞–ª–æ—á–∫—É
  steamText.style.transition = "opacity 0.4s ease";
  steamText.style.opacity = "0";
  steamText.style.pointerEvents = "none";

  followWand(e);

  function move(ev) { followWand(ev); }
  function drop(ev) {
    document.removeEventListener("mousemove", move);
    document.removeEventListener("mouseup", drop);
    checkWandUse(ev);
  }

  document.addEventListener("mousemove", move);
  document.addEventListener("mouseup", drop);
}

function followWand(e) {
  const rect = container.getBoundingClientRect();
  const w = wand.offsetWidth;
  wand.style.left = (e.clientX - rect.left - w / 2) + "px";
  wand.style.top = (e.clientY - rect.top - w / 4) + "px";
}

// -------------------- –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ü–ê–õ–û–ß–ö–ò --------------------
function checkWandUse(e) {
  const wandRect = wand.getBoundingClientRect();
  const potRect = pot.getBoundingClientRect();

  const overlap =
    wandRect.left < potRect.right &&
    wandRect.right > potRect.left &&
    wandRect.top < potRect.bottom &&
    wandRect.bottom > potRect.top;

  if (overlap) {
    transformPotToJam();
  } else {
    showTip(e.clientX, e.clientY, "–∫ –∫–∞—Å—Ç—Ä—é–ª–µ ü•òü™Ñ");
  }
}

function transformPotToJam() {
  triggerPoof(
    pot.getBoundingClientRect().left + pot.offsetWidth / 2,
    pot.getBoundingClientRect().top + pot.offsetHeight / 2,
    2
  );

  const newJar = document.createElement("img");
  newJar.src = jamJarSrc;
  newJar.style.position = "absolute";
  newJar.style.left = "37%";
  newJar.style.top = "15%";
  newJar.style.width = "25%";
  newJar.style.zIndex = 1;

  container.replaceChild(newJar, pot);
  pot = newJar;

  jamPlaced = true;
  berriesDisabled = true;

  setTimeout(returnWandHome, 300);
}

// -------------------- –í–û–ó–í–†–ê–¢ –ü–ê–õ–û–ß–ö–ò --------------------
function returnWandHome() {
  wand.style.transition = "left 0.6s ease, top 0.6s ease, transform 0.6s ease";
  wand.style.left = wandStart.left;
  wand.style.top = wandStart.top;
  wand.style.transform = "rotate(-20deg)";
  wand.style.pointerEvents = "auto";
  wandPicked = false;
}

// -------------------- –ü–û–§ --------------------
function triggerPoof(x, y, scale = 1) {
  const puff = document.createElement("img");
  puff.src = "https://opengameart.org/sites/default/files/gif_4.gif";
  puff.className = "poof";
  container.appendChild(puff);

  const rect = container.getBoundingClientRect();
  puff.onload = () => {
    const w = puff.offsetWidth * scale;
    const h = puff.offsetHeight * scale;
    puff.style.width = w + "px";
    puff.style.height = "auto"
    puff.style.left = (x - rect.left - w / 2) + "px";
    puff.style.top = (y - rect.top - h / 2) + "px";
    requestAnimationFrame(() => puff.style.opacity = "1");
  };

  setTimeout(() => {
    puff.style.opacity = "0";
    setTimeout(() => puff.remove(), 400);
  }, 600);
}

// -------------------- –ü–û–î–°–ö–ê–ó–ö–ò --------------------
function showTip(x, y, text) {
  smallTip.innerText = text;
  smallTip.style.left = x + "px";
  smallTip.style.top = y - 20 + "px";
  smallTip.style.opacity = "1";
  setTimeout(() => (smallTip.style.opacity = "0"), 1000);
}
</script>

</body>
</html>
